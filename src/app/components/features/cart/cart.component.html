<section class="cart-page">
  <!-- Lista de produse din coÈ™ -->
  <div class="cart-products" *ngIf="(cartItems$ | async) as items">
    <header class="section-header">
      <h2>CoÈ™ul tÄƒu</h2>
      <a routerLink="/shop" class="link">ContinuÄƒ cumpÄƒrÄƒturile</a>
    </header>

    <div class="row head" >
      <ng-container *ngIf="items.length > 0">
        <div class="cell col-item">Produs</div>
        <div class="cell col-price">PreÈ›</div>
        <div class="cell col-qty">Cantitate</div>
        <div class="cell col-subtotal">Subtotal</div>
        <div class="cell col-actions"></div>
      </ng-container>
    </div>
    <!-- EMPTY CART -->
    <div class="empty-cart" *ngIf="(cartItems$ | async)?.length === 0">
      CoÈ™ul tÄƒu este gol. AdaugÄƒ cÃ¢teva produse!
    </div>

    <!-- ITEMS -->
    <div class="row item" *ngFor="let item of (cartItems$ | async)">
      <div class="cell col-item item-meta">
        <img [src]="item.imageUrl" [alt]="item.name"
          class="thumb" />
        <div class="meta">
          <a href="/details/{{item.productId}}"> {{ item.name }} </a>
          <div class="sku">Cod: {{ item.productId }}</div>
        </div>
      </div>

      <div class="cell col-price">
        {{ item.price | number:'1.2-2' }} RON
      </div>

      <div class="cell col-qty">
        <div class="qty">
          <button class="qty-btn" (click)="decrease(item.productId)" aria-label="Scade">
            âˆ’
          </button>
          <input type="number" [value]="item.quantity" readonly />
          <button class="qty-btn" (click)="increase(item.productId)" aria-label="CreÈ™te">
            ï¼‹
          </button>
        </div>
      </div>

      <div class="cell col-subtotal">
        {{ item.lineTotal| number:'1.2-2' }} RON
      </div>

      <div class="cell col-actions">
        <button class="icon-btn remove" (click)="remove(item.productId)" aria-label="È˜terge">
          âœ•
        </button>
      </div>
    </div>

    <div class="bulk-actions" *ngIf="items.length > 0">
      <button class="btn ghost" (click)="clearCart()">GoleÈ™te coÈ™ul</button>
    </div>
  </div>

  <!-- Rezumat coÈ™ -->
  <aside class="cart-summary" *ngIf="(cartItems$ | async) as items">
    <div class="card" *ngIf="items.length > 0">
      <h3>Rezumat comandÄƒ</h3>

      <div class="line">
        <span>Produse ({{ (cartItems$ | async)?.length }})</span>
        <span>{{ totalPrice$ | async |  number:'1.2-2' }} RON</span>
      </div>

      <!-- <div class="line">
        <span>Transport</span>
        <select class="select">
          <option>Calculat la checkout</option>
          <option>Curier standard â€” 24.99 RON</option>
          <option>Ridicare personalÄƒ â€” 0.00 RON</option>
        </select>
      </div> -->

      <div class="coupon">
        <input type="text" placeholder="Cupon reducere" />
        <button class="btn apply">AplicÄƒ</button>
      </div>

      <div class="divider"></div>

      <div class="line">
        <span>Subtotal</span>
        <span>{{ totalPrice$ | async | number:'1.2-2'}} RON</span>
      </div>

      <div class="line muted">
        <span>TVA (19%)</span>
        <span>{{ ((totalPrice$ | async)! * 0.19) | number:'1.2-2' }} RON</span>
      </div>

      <div class="total">
        <span>Total</span>
        <strong>{{
          ((totalPrice$ | async)! * 1.19) | number:'1.2-2' }} RON</strong>
      </div>

      <button class="btn primary wfull" [routerLink]="'/purchase'">
        ContinuÄƒ cÄƒtre platÄƒ
      </button>

      <a routerLink="/shop" class="link small">sau continuÄƒ cumpÄƒrÄƒturile</a>
    </div>

    <div class="info-card">
      <div class="icn">ðŸ”’</div>
      <div>
        <strong>PlatÄƒ sigurÄƒ</strong>
        <p>TranzacÈ›ii criptate È™i protejate.</p>
      </div>
    </div>

    <div class="info-card">
      <div class="icn">ðŸŒ¿</div>
      <div>
        <strong>Produse naturale</strong>
        <p>Direct din Bucovina, certificare BIO.</p>
      </div>
    </div>
  </aside>
</section>