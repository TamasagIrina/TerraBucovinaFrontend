<section class="checkout-page">
  <div class="checkout-form">
    <header class="section-header">
      <h2>Finalizare comandÄƒ</h2>
      <a routerLink="/shop" class="link">Ãnapoi la magazin</a>
    </header>

    <div class="card">
      <h3>Detalii de contact</h3>
      <div class="grid-2">
        <label class="field">
          <span>Nume</span>
          <input type="text" placeholder="Nume È™i prenume" />
        </label>
        <label class="field">
          <span>Email</span>
          <input type="email" placeholder="ex: nume@email.com" />
        </label>
      </div>
      <div class="grid-2">
        <label class="field">
          <span>Telefon</span>
          <input type="tel" placeholder="+40 7xx xxx xxx" />
        </label>
        <label class="field">
          <span>CUI (opÈ›ional)</span>
          <input type="text" placeholder="Pentru facturÄƒ pe firmÄƒ" />
        </label>
      </div>
      <label class="checkbox">
        <input type="checkbox" />
        <span>Doresc facturÄƒ pe firmÄƒ</span>
      </label>
    </div>

    <div class="card">
      <h3>AdresÄƒ de livrare</h3>
      <div class="grid-2">
        <label class="field">
          <span>Èšara</span>
          <select>
            <option>RomÃ¢nia</option>
            <option>Italia</option>
            <option>Germania</option>
          </select>
        </label>
        <label class="field">
          <span>JudeÈ›</span>
          <input type="text" placeholder="ex: Suceava" />
        </label>
      </div>
      <div class="grid-2">
        <label class="field">
          <span>OraÈ™</span>
          <input type="text" placeholder="ex: RÄƒdÄƒuÈ›i" />
        </label>
        <label class="field">
          <span>Cod poÈ™tal</span>
          <input type="text" placeholder="ex: 725400" />
        </label>
      </div>
      <label class="field">
        <span>AdresÄƒ</span>
        <input type="text" placeholder="Strada, numÄƒr, bloc, scara, apartament" />
      </label>
    </div>

    <div class="card">
      <h3>MetodÄƒ de livrare</h3>
      <label class="radio">
        <input type="radio" name="ship"   value="curier" [(ngModel)]="shippingMethod"  checked />
        <div class="radio-line">
          <span>Curier standard</span>
          <strong>RON 24.99</strong>
        </div>
      </label>
      <label class="radio">
        <input type="radio" name="ship" value="pickup" [(ngModel)]="shippingMethod" />
        <div class="radio-line">
          <span>Ridicare personalÄƒ</span>
          <strong>RON 0.00</strong>
        </div>
      </label>
    </div>

    <!-- PLATÄ‚ cu tab-uri -->
    <div class="card">
      <h3>PlatÄƒ</h3>

      <div class="tabs" role="tablist">
        <button class="tab" role="tab" [class.active]="tab==='card'" [attr.aria-selected]="tab==='card'"
          (click)="setTab('card')">Card</button>

        <button class="tab" role="tab" [class.active]="tab==='cod'" [attr.aria-selected]="tab==='cod'"
          (click)="setTab('cod')">Ramburs</button>

        <button class="tab" role="tab" [class.active]="tab==='bank'" [attr.aria-selected]="tab==='bank'"
          (click)="setTab('bank')">Transfer bancar</button>
      </div>

      <!-- CARD -->
      <div class="pay-card" *ngIf="tab==='card'">
        <label class="field">
          <span>NumÄƒr card</span>
          <input type="text" inputmode="numeric" placeholder="1234 5678 9012 3456" />
        </label>
        <div class="grid-3">
          <label class="field">
            <span>Valabil pÃ¢nÄƒ la</span>
            <input type="text" inputmode="numeric" placeholder="MM/AA" />
          </label>
          <label class="field">
            <span>CVV</span>
            <input type="password" inputmode="numeric" placeholder="***" />
          </label>
          <label class="field">
            <span>DeÈ›inÄƒtor card</span>
            <input type="text" placeholder="Nume exact ca pe card" />
          </label>
        </div>
        <label class="checkbox">
          <input type="checkbox" />
          <span>SalveazÄƒ datele cardului Ã®n siguranÈ›Äƒ</span>
        </label>
      </div>

      <!-- RAMBURS -->
      <div class="pay-cod" *ngIf="tab==='cod'">
        <p class="muted">PlÄƒteÈ™ti numerar/pos la curier, la livrare.</p>
        <ul class="mini-list">
          <li>VerificÄƒ adresa È™i numÄƒrul de telefon.</li>
          <li>Curierul te contacteazÄƒ Ã®nainte de livrare.</li>
          <li>Taxa de ramburs poate fi inclusÄƒ Ã®n costul transportului.</li>
        </ul>
      </div>

      <!-- TRANSFER BANCAR -->
      <div class="pay-bank" *ngIf="tab==='bank'">
        <p class="muted">DupÄƒ plasare, primeÈ™ti pe email factura È™i detaliile de platÄƒ.</p>
        <div class="bank-box">
          <div><strong>Beneficiar:</strong> Terra Bucovina SRL</div>
          <div><strong>IBAN:</strong> RO49 AAAA 1B31 0075 9384 0000</div>
          <div><strong>Banca:</strong> BCR, Sucursala Suceava</div>
          <div><strong>Detalii platÄƒ:</strong> Nr. comandÄƒ #TB-12345</div>
        </div>
        <p class="hint">Comanda se proceseazÄƒ dupÄƒ confirmarea plÄƒÈ›ii.</p>
      </div>
    </div>

    <div class="card">
      <div class="coupon">
        <input type="text" placeholder="Cupon reducere" />
        <button class="btn apply">AplicÄƒ</button>
      </div>
      <label class="checkbox terms">
        <input type="checkbox" />
        <span>Sunt de acord cu termenii È™i condiÈ›iile</span>
      </label>
      <button class="btn primary wfull">PlÄƒteÈ™te acum</button>
    </div>
  </div>

  <aside class="order-summary" *ngIf="cartItems$ | async as items">
  <div class="card" *ngIf="items.length > 0">
    <h3>Rezumat comandÄƒ</h3>

    <!-- LISTÄ‚ PRODUSE -->
    <div class="summary-items">
      <div class="s-item" *ngFor="let item of items">
        <img
          [src]="item.imageUrl || 'https://placehold.co/60x60/cccccc/ffffff?text=IMG'"
          [alt]="item.name"
        />
        <div class="meta">
          <div class="name">{{ item.name }}</div>
          <div class="muted">Cantitate: {{ item.quantity }}</div>
        </div>
        <div class="price">
          {{ item.lineTotal | number:'1.2-2' }} RON
        </div>
      </div>
    </div>

    <!-- SUBTOTAL -->
    <div class="line">
      <span>Subtotal</span>
      <span>{{ totalPrice$ | async | number:'1.2-2'}} RON</span>
    </div>

    <!-- TRANSPORT -->
    <div class="line">
      <span>Transport</span>
      <span *ngIf="shippingMethod === 'curier'">24.99 RON</span>
      <span *ngIf="shippingMethod === 'pickup'">0 RON</span>
      <span *ngIf="!shippingMethod">Calculat la checkout</span>
    </div>

    <!-- TVA -->
    <div class="line muted">
      <span>TVA (19%)</span>
      <span>{{ ((totalPrice$ | async)! * 0.19) | number:'1.2-2'}} RON</span>
    </div>

    <!-- TOTAL -->
    <div class="total">
      <span>Total</span>
      <strong>
        {{ ((totalPrice$ | async)! * 1.19) | number:'1.2-2' }} RON
      </strong>
    </div>

    <a routerLink="/cart" class="link small">EditeazÄƒ coÈ™ul</a>
  </div>

  <!-- Mesaje informative -->
  <div class="info-card">
    <div class="icn">ğŸ”’</div>
    <div>
      <strong>PlatÄƒ sigurÄƒ</strong>
      <p>TranzacÈ›ii criptate È™i protejate.</p>
    </div>
  </div>

  <div class="info-card">
    <div class="icn">ğŸšš</div>
    <div>
      <strong>Livrare rapidÄƒ</strong>
      <p>24â€“48h Ã®n reÈ›eaua de curierat.</p>
    </div>
  </div>
</aside>
</section>