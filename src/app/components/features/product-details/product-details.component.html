<section class="product-page" *ngIf="product$ | async as product">
  <a routerLink="/shop" class="back-link">â† Ãnapoi la magazin</a>

  <div class="grid">
    <!-- LEFT: Gallery -->
    <div class="gallery">
      <div class="main-image"  *ngFor="let img of images$  | async" >
        <img *ngIf="img.isPrimary" [src]="environment+img.imageUrl" [alt]="product.name" />
      
      </div>
      <div class="thumbs"  *ngFor="let img of images$  | async">
        <button class="thumb is-active">
           <img *ngIf="img.isPrimary" [src]="environment+img.imageUrl" [alt]="product.name" />
        </button>
        <button class="thumb">
          <img *ngIf="!img.isPrimary" [src]="environment+img.imageUrl" [alt]="product.name" />
        </button>
       
      </div>
    </div>

    <!-- RIGHT: Info -->
    <div class="info">
      <h1 class="title">{{ product.name }}</h1>

      <div class="meta">
        <div class="rating">
          <span class="stars">â˜…â˜…â˜…â˜…â˜†</span>
          <span class="count">(24 recenzii)</span>
        </div>
        <!-- <div class="sku">
          <span class="muted">Cod:</span> TB-ACACIA-500
        </div> -->
        <div class="stock in" *ngIf="product.stockQty>0">Ãn stoc</div>
        <div class="stock out" *ngIf="product.stockQty==0">Nu este in stoc </div>
      </div>

      <div class="price-line">
        <div class="price">â‚¬{{ product.price || 59 }}</div>
        <div class="vat muted">TVA inclus</div>
      </div>

      <div class="short-desc">
        {{product.shortDesc}}
      </div>

      <div class="controls">
        <div class="qty">
          <button class="qty-btn">âˆ’</button>
          <input type="number" value="1" min="1" />
          <button class="qty-btn">ï¼‹</button>
        </div>

        <button (click)="addToCart()" class="btn primary">
          <mat-icon>shopping_cart</mat-icon>
          AdaugÄƒ Ã®n coÈ™
        </button>

        <button   (click)="toggleFavorite(product.id)" class="btn ghost">
          <mat-icon class="fav" >favorite</mat-icon>
          Favorite
        </button>
      </div>

      <div class="extras">
        <div class="chip">ğŸŒ¿ Produs natural</div>
        <div class="chip">ğŸ‡·ğŸ‡´ Fabricat Ã®n RomÃ¢nia</div>
        <div class="chip">ğŸšš Livrare 24â€“48h</div>
      </div>

      <div class="share">
        <span class="muted">Distribuie:</span>
        <button class="icon-btn" aria-label="Share Facebook">f</button>
        <button class="icon-btn" aria-label="Share Instagram">ig</button>
        <button class="icon-btn" aria-label="Share Link">â¤´ï¸</button>
      </div>
    </div>
  </div>

  <!-- TABS -->
  <div class="tabs">
    <button class="tab active">Descriere</button>
    <button class="tab">SpecificaÈ›ii</button>
    <button class="tab">Recenzii (24)</button>
  </div>

  <div class="tabs-content">
    <div class="card">
      <h3>Descriere</h3>
      <p>
       {{product.longDesc}}
      </p>
      <ul class="bullets">
        <li>Ingrediente: 100% extract natural</li>
        <li>ConÈ›inut: 500 ml</li>
        <li>Ambalaj reciclabil</li>
      </ul>
    </div>

    <div class="card">
      <h3>SpecificaÈ›ii</h3>
      <div class="specs">
        <div class="row"><span>Origine</span><strong>Bucovina</strong></div>
        <div class="row"><span>Greutate netÄƒ</span><strong>500 ml</strong></div>
        <div class="row"><span>Certificare</span><strong>BIO</strong></div>
        <div class="row"><span>Termen de valabilitate</span><strong>18 luni</strong></div>
      </div>
    </div>

    <div class="card">
      <h3>Recenzii</h3>
      <div class="review">
        <div class="r-head">
          <strong>Andrei</strong>
          <span class="stars">â˜…â˜…â˜…â˜…â˜…</span>
        </div>
        <p>Aroma este excelentÄƒ, se simte naturalÄƒ. Livrare rapidÄƒ.</p>
      </div>
      <div class="review">
        <div class="r-head">
          <strong>Ioana</strong>
          <span class="stars">â˜…â˜…â˜…â˜…â˜†</span>
        </div>
        <p>Ambalaj frumos, produs foarte bun. Recomand!</p>
      </div>
      <button class="btn outline" (click)="canUserReview(product.id)" >Scrie o recenzie</button>
    </div>
  </div>

  <!-- Related products -->
  <div class="related">
    <h3>Produse similare</h3>
    <div class="rel-grid">
      <a class="rel-card" routerLink="/product/2">
        <img src="assets/images/stejar-copac-terrabucovina.jpg" alt="Produs" />
        <div class="name">Extract floral II</div>
        <div class="price">â‚¬62</div>
      </a>
      <a class="rel-card" routerLink="/product/3">
        <img src="assets/images/stejar-copac-terrabucovina.jpg" alt="Produs" />
        <div class="name">Ceai relaxant</div>
        <div class="price">â‚¬28</div>
      </a>
      <a class="rel-card" routerLink="/product/4">
        <img src="assets/images/stejar-copac-terrabucovina.jpg" alt="Produs" />
        <div class="name">Ulei esenÈ›ial</div>
        <div class="price">â‚¬79</div>
      </a>
    </div>
  </div>
</section>
